/*
 * ScrollMagic.Scenester v0 (2016-02-13)
 * Scrollmagic plugin for grouping Scenes by class and chaining scene creation
 *
 * @version 0
 * @license Dual licensed under MIT license and GPL.
 * @author Andrew Lomax <andrewlomaxr@gmail.comc>
 *
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery","ScrollMagic","GSAP"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("scrollmagic"),require("gsap")):e.returnExports=t(e.jQuery,e.ScrollMagic,e.TweenMax)}(this,function(e,t,i){"use strict"
function n(i,n,s,r){function o(){var i=this
return this.$trigger.each(function(){var n=e.extend({},i.opts)
n.triggerElement=this,"function"==typeof n.duration&&(n.duration=n.duration.apply(this)),"string"==typeof n.offset&&(-1!==n.offset.indexOf("%")?n.offset=e(this).outerHeight()*(n.offset.replace("%","")/100):-1!==n.offset.indexOf("vh")&&(n.offset=e(window).height()*(n.offset.replace("vh","")/100)))
var s=new t.Scene(n)
i.scenes.push(s)}),i}function c(e,t,i){var n,s,r=t.from,o=t.to,c=t.position
return r&&o?s="fromTo":r?(s="from",o=t.position):(s="to",r=t.to,o=t.position),t.stagger&&("fromTo"==s?(c=t.stagger,n=t.position):(o=t.stagger,c=t.position),s="stagger"+s.charAt(0).toUpperCase()+s.slice(1)),void 0===t.duration&&(t.duration=0),i?i[s](e,t.duration,r,o,c,n):TweenMax[s](e,t.duration,r,o,c,n)}return"self"==r?this.$trigger=e(n).find(e(i)):this.$trigger=e(n),this.selector=i,this.opts=s,this.scenes=[],this.triggerRelationship=r,this.setTween=function(e){this.eachScene(function(t,i,n){var s=c(i,e)
t.setTween(s)})},this.addToTimeline=function(e,t){this.eachScene(function(i,n,s){c(n,t,e)})},this.setPin=function(e){this.eachScene(e,function(e,t,i){e.setPin(t[0],s)})},this.on=function(e,t){this.eachScene(function(i,n,s){i.on(e,t)})},this.remove=function(){this.eachScene(function(e){e.remove()})},this.addTo=function(e){this.eachScene(function(t){t.addTo(e)})},this.addIndicators=function(){this.eachScene(function(e){e.addIndicators()})},this.findSceneElement=function(t,i){var n,s=e(t.triggerElement())
return n="aunt"==this.triggerRelationship||"uncle"==this.triggerRelationship?s.siblings().find(e(i)):"sibling"==this.triggerRelationship?s.siblings(e(i)):"self"==this.triggerRelationship?s:s.find(e(i))},this.eachScene=function(){var e,t
2==arguments.length?(t=arguments[0],e=arguments[1]):(t=this.selector,e=arguments[0])
for(var i=0;i<this.scenes.length;i++){var n=this.scenes[i],s=this.findSceneElement(n,t)
e(n,s,i)}},o.call(this)}t.Scenester=function(e,t){return this.sceneGroups={},this.el=e,this.controller=t,this.timeline=new TimelineMax,this.timeline.pause(),this}
var s=t.Scenester.prototype
s.setScene=function(e,t,i){var s=i?i.scene:{}
s||(s={})
var r=i.triggerRelationship?i.triggerRelationship:"parent",o=this.sceneGroups[e]=new n(t,this.el,s,r)
if(i.tween&&o.setTween(i.tween),i.timeline&&o.addToTimeline(this.timeline,i.timeline),i.pin&&o.setPin(i.pin),i.on)for(var c in i.on)o.on(c,i.on[c])
return i.addIndicators&&o.addIndicators(),o.addTo(this.controller),this},s.removeAll=function(){for(var e in this.sceneGroups)this.sceneGroups[e].remove()
return this.sceneGroups={},this},s.getScenes=function(e){return this.sceneGroups[e].scenes},s.removeScene=function(e){return this.sceneGroups[e].remove(),delete this.sceneGroups[e],this},s.play=function(){return this.timeline.play(),this},s.pause=function(){return this.timeline.pause(),this}})
